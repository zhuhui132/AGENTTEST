# 📖 项目介绍

AgentTest 是一个围绕 **智能对话 Agent** 的参考实现，聚焦以下能力：

- `IntelligentAgent`：统一的消息处理与生命周期管理
- `MemorySystem`：轻量级记忆存储与重要性衰减
- `RAGSystem`：内存型检索增强生成（Retrieval Augmented Generation）
- `ToolSystem`：异步工具注册、执行与健康检查
- `ContextManager`：对话上下文摘要、意图推断与实体提取

该项目既可作为个人/团队项目的基础框架，也可作为理解 Agent 架构与工程实践的教学参考。

---

## 🌟 关键特性

| 模块 | 亮点 | 说明 |
| --- | --- | --- |
| Agent | 异步 & 同步双接口 | `IntelligentAgent`（异步）+ `Agent`（同步包装），便于 CLI / Web 场景快速对接 |
| 记忆 | 分级评分 | 按相关度、重要性与新鲜度排序，可自定义记忆类型与容量策略 |
| RAG | 纯内存实现 | 无第三方依赖，适合本地开发与单元测试，可扩展为向量库实现 |
| 工具 | 注册 + 校验 + 执行 | 支持 `BaseTool` 子类与普通函数包装，内置线程池回退与健康检查 |
| 上下文 | 智能摘要 | 自动聚合最近对话、推断意图、提取关键词实体，服务于 Prompt 构建 |
| 配置 | 统一入口 | `ConfigManager` 支持 YAML/JSON 配置解析、缓存与环境变量覆盖 |

---

## 🏗️ 架构总览

```
┌──────────────┐
│ IntelligentAgent │
└──────┬─────────┘
       │ orchestrates
┌──────▼──────┐   ┌──────────┐   ┌────────┐   ┌────────────┐
│ ContextMgr │   │ MemorySys │   │ RAGSys │   │ ToolSystem │
└──────┬──────┘   └─────┬──────┘   └──┬─────┘   └──────┬──────┘
       │                │             │               │
 │ Intent/Summary │  │ 相关记忆 │  │ 文档检索 │  │ 工具调用 │
```

1. Agent 接收消息 → 调用 `ContextManager` 生成上下文
2. 并发检索记忆 (`MemorySystem`) 与文档 (`RAGSystem`)
3. 根据内容规划并执行工具 (`ToolSystem`)
4. 汇总上下文/记忆/检索/工具结果 → 生成响应

---

## 🚀 运行体验

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

python examples/quickstart.py
```

输出示例：
```
收到来自用户的消息: 你好
上下文摘要: …
工具执行: 无
Agent 回复: 您好！我是 AgentTest，很高兴为您提供帮助。
```

> 提示：若需同步调用，可使用根目录 `agent.py` 提供的 `Agent` 类。

---

## 🔌 常见扩展场景

| 场景 | 推荐入口 | 说明 |
| --- | --- | --- |
| 扩展记忆存储 | `MemorySystem` | 替换为数据库/向量库实现，保留接口即可 |
| 接入真实 RAG | `RAGSystem` | 对接 ElasticSearch、Milvus 等后端 |
| 增加工具 | `ToolSystem.register_callable` | 快速注册 HTTP、计算、检索工具 |
| 接入外部 LLM | `llm/base.py` | 继承 `BaseLLM`，实现生成/嵌入接口 |
| 自定义上下文 | `ContextManager` | 实现更复杂的摘要/意图识别逻辑 |

---

## 📦 项目目录（简化版）

```
src/
├── agents/agent.py        # IntelligentAgent 与同步包装器
├── memory/memory.py       # MemorySystem 异步实现
├── rag/rag.py             # RAGSystem 异步实现
├── utils/tools.py         # ToolSystem 与工具适配器
├── utils/context.py       # ContextManager
├── core/                  # 类型、接口、配置、异常
└── llm/base.py            # LLM 抽象基类
```

---

## 📈 当前状态

| 指标 | 值 | 说明 |
| --- | --- | --- |
| 最低 Python 版本 | 3.10 | 使用 `asyncio`、`dataclasses` |
| 外部依赖 | 极少 | 默认仅依赖标准库，可选安装 dev 依赖 |
| 示例脚本 | 3 个 | `examples/` 目录，演示基础能力 |
| 测试 | 待完善 | `pytest` 命令需安装 `requirements-dev.txt` |

> 如需贡献测试或文档，请参见 [贡献指南](../guides/08-贡献指南.md)。

---

## 🧭 下一步阅读建议

1. [核心概念](03-核心概念.md) — 了解术语与内聚边界
2. [Agent API](../api/02-agent-api.md) — 熟悉主要类与方法
3. [开发工作流程](../development/01-开发工作流程.md) — 本地研发与提交流程
4. [技术实现指南](../guides/04-技术实现指南.md) — 深入理解实现细节

---

*最近更新：2025-11-10* · *维护人：Agent Team*
